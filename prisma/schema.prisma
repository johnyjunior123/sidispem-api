generator client {
  provider     = "prisma-client"
  output       = "../generated/prisma"
  moduleFormat = "cjs"
}

datasource db {
  provider = "postgresql"
}

model User {
  id           Int           @id @default(autoincrement())
  email        String
  name         String
  password     String
  role         String        @default("ATENDENTE")
  created_at   DateTime      @default(now())
  updated_at   DateTime      @updatedAt
  associated   Associate?
  appointments Appointment[]

  @@map("users")
}

model Associate {
  id           Int        @id @default(autoincrement())
  imgPerfil    String?
  name         String
  cpf          String?
  registration String     @unique
  status       String
  situation    String
  birthday     DateTime?
  user         User?      @relation(fields: [userId], references: [id])
  created_at   DateTime   @default(now())
  updated_at   DateTime   @updatedAt
  userId       Int?       @unique
  workspace    Workspace? @relation(fields: [workspaceId], references: [id])
  workspaceId  Int?

  @@map("associates")
}

model Workspace {
  id           Int           @id @default(autoincrement())
  name         String
  associates   Associate[]
  created_at   DateTime      @default(now())
  updated_at   DateTime      @default(now()) @updatedAt
  appointments Appointment[]

  @@map("workspaces")
}

model Appointment {
  id          Int       @id @default(autoincrement())
  description String
  start       DateTime
  end         DateTime
  local       Workspace @relation(fields: [workspaceId], references: [id])
  receptor    User      @relation(fields: [userId], references: [id])
  workspaceId Int
  userId      Int
  created_at  DateTime  @default(now())
  updated_at  DateTime  @default(now()) @updatedAt

  @@map("appointments")
}
